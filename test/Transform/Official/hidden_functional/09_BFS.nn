global ptr h init with i32 0
global ptr head init with 1005 x i32 zeros
global ptr inq init with 1005 x i32 zeros
global ptr next init with 5005 x i32 zeros
global ptr que init with 1005 x i32 zeros
global ptr to init with 5005 x i32 zeros
global ptr maxm init with i32 5005
global ptr cnt init with i32 0
global ptr maxn init with i32 1005
global ptr m init with i32 0
global ptr tail init with i32 0
global ptr n init with i32 0
i32 same(i32 s, i32 t) {
entry126:
  store i32 0 to ptr @h
  store i32 0 to ptr @tail
  call void inqueue(i32 %s)
  br bb %while.cond132
while.cond132:
  res131.phi246 = phi [bb %entry126, i32 0, bb %while.exit153, i32 %res131.phi]
  h.load135 = load i32 from ptr @h
  tail.load136 = load i32 from ptr @tail
  137 = icmp slt i32 %h.load135, i32 %tail.load136
  138 = icmp ne i1 %137, i1 0
  br i1 %138, bb %while.body133, bb %while.exit134
while.body133:
  140 = call i32 pop_queue()
  143 = icmp eq i32 %140, i32 %t
  br i1 %143, bb %then144, bb %if.exit145
while.exit134:
  br bb %while.cond181
then144:
  br bb %if.exit145
if.exit145:
  res131.phi = phi [bb %while.body133, i32 %res131.phi246, bb %then144, i32 1]
  148 = mul i32 %140, i32 4
  149 = ptradd ptr @head, i32 %148
  149.load = load i32 from ptr %149
  br bb %while.cond151
while.cond151:
  i146.phi = phi [bb %if.exit145, i32 %149.load, bb %if.exit170, i32 %178.load]
  156 = icmp ne i32 %i146.phi, i32 -1
  157 = icmp ne i1 %156, i1 0
  br i1 %157, bb %while.body152, bb %while.exit153
while.body152:
  159 = mul i32 %i146.phi, i32 4
  160 = ptradd ptr @to, i32 %159
  160.load = load i32 from ptr %160
  162 = mul i32 %160.load, i32 4
  163 = ptradd ptr @inq, i32 %162
  163.load = load i32 from ptr %163
  165 = icmp ne i32 %163.load, i32 0
  166 =  i1 %165, i1 1
  167 = zext i1 %166 to i32
  168 = icmp ne i32 %167, i32 0
  br i1 %168, bb %then169, bb %if.exit170
while.exit153:
  br bb %while.cond132
then169:
  173.load = load i32 from ptr %160
  call void inqueue(i32 %173.load)
  br bb %if.exit170
if.exit170:
  178 = ptradd ptr @next, i32 %159
  178.load = load i32 from ptr %178
  br bb %while.cond151
while.cond181:
  i180.phi = phi [bb %while.exit134, i32 0, bb %while.body182, i32 %195]
  tail.load185 = load i32 from ptr @tail
  186 = icmp sle i32 %i180.phi, i32 %tail.load185
  187 = icmp ne i1 %186, i1 0
  br i1 %187, bb %while.body182, bb %while.exit183
while.body182:
  189 = mul i32 %i180.phi, i32 4
  190 = ptradd ptr @que, i32 %189
  190.load = load i32 from ptr %190
  192 = mul i32 %190.load, i32 4
  193 = ptradd ptr @inq, i32 %192
  store i32 0 to ptr %193
  195 = add i32 %i180.phi, i32 1
  br bb %while.cond181
while.exit183:
  ret i32 %res131.phi246
}

void init() {
entry88:
  br bb %while.cond90
while.cond90:
  i.phi = phi [bb %entry88, i32 0, bb %while.body91, i32 %102]
  maxn.load = load i32 from ptr @maxn
  95 = icmp slt i32 %i.phi, i32 %maxn.load
  96 = icmp ne i1 %95, i1 0
  br i1 %96, bb %while.body91, bb %while.exit92
while.body91:
  98 = mul i32 %i.phi, i32 4
  99 = ptradd ptr @head, i32 %98
  store i32 -1 to ptr %99
  102 = add i32 %i.phi, i32 1
  br bb %while.cond90
while.exit92:
  ret 
}

external i32 getint()

external i32 getch()

void inqueue(i32 x) {
entry103:
  106 = mul i32 %x, i32 4
  107 = ptradd ptr @inq, i32 %106
  store i32 1 to ptr %107
  tail.load = load i32 from ptr @tail
  109 = add i32 %tail.load, i32 1
  store i32 %109 to ptr @tail
  111 = mul i32 %109, i32 4
  112 = ptradd ptr @que, i32 %111
  store i32 %x to ptr %112
  ret 
}

external void putint(i32 )

void add_edge(i32 from, i32 To) {
entry51:
  cnt.load = load i32 from ptr @cnt
  55 = mul i32 %cnt.load, i32 4
  56 = ptradd ptr @to, i32 %55
  store i32 %To to ptr %56
  cnt.load58 = load i32 from ptr @cnt
  59 = mul i32 %cnt.load58, i32 4
  60 = ptradd ptr @next, i32 %59
  62 = mul i32 %from, i32 4
  63 = ptradd ptr @head, i32 %62
  63.load = load i32 from ptr %63
  store i32 %63.load to ptr %60
  cnt.load68 = load i32 from ptr @cnt
  store i32 %cnt.load68 to ptr %63
  cnt.load69 = load i32 from ptr @cnt
  70 = add i32 %cnt.load69, i32 1
  store i32 %70 to ptr @cnt
  72 = mul i32 %70, i32 4
  73 = ptradd ptr @to, i32 %72
  store i32 %from to ptr %73
  cnt.load75 = load i32 from ptr @cnt
  76 = mul i32 %cnt.load75, i32 4
  77 = ptradd ptr @next, i32 %76
  79 = mul i32 %To, i32 4
  80 = ptradd ptr @head, i32 %79
  80.load = load i32 from ptr %80
  store i32 %80.load to ptr %77
  cnt.load85 = load i32 from ptr @cnt
  store i32 %cnt.load85 to ptr %80
  cnt.load86 = load i32 from ptr @cnt
  87 = add i32 %cnt.load86, i32 1
  store i32 %87 to ptr @cnt
  ret 
}

external i32 getarray(ptr )

external i32 getfarray(ptr )

i32 main() {
entry197:
  198 = call i32 quick_read()
  store i32 %198 to ptr @n
  199 = call i32 quick_read()
  store i32 %199 to ptr @m
  call void init()
  br bb %while.cond201
while.cond201:
  y238.phi264 = phi [bb %entry197, i32 ub, bb %if.exit225, i32 %y238.phi]
  x236.phi262 = phi [bb %entry197, i32 ub, bb %if.exit225, i32 %x236.phi]
  y.phi260 = phi [bb %entry197, i32 ub, bb %if.exit225, i32 %y.phi]
  x227.phi258 = phi [bb %entry197, i32 ub, bb %if.exit225, i32 %x227.phi]
  m.load = load i32 from ptr @m
  205 = icmp ne i32 %m.load, i32 0
  br i1 %205, bb %while.body202, bb %while.exit203
while.body202:
  207 = call i32 getch()
  br bb %while.cond208
while.exit203:
  ret i32 0
while.cond208:
  ch206.phi = phi [bb %while.body202, i32 %207, bb %while.body209, i32 %221]
  212 = icmp ne i32 %ch206.phi, i32 81
  br i1 %212, bb %select.then213, bb %select.else214
while.body209:
  221 = call i32 getch()
  br bb %while.cond208
while.exit210:
  223 = icmp eq i32 %ch206.phi, i32 81
  br i1 %223, bb %then224, bb %else226
select.then213:
  218 = icmp ne i32 %ch206.phi, i32 85
  br bb %select.exit215
select.else214:
  br bb %select.exit215
select.exit215:
  select216.phi = phi [bb %select.else214, i1 0, bb %select.then213, i1 %218]
  220 = icmp ne i1 %select216.phi, i1 0
  br i1 %220, bb %while.body209, bb %while.exit210
then224:
  228 = call i32 quick_read()
  230 = call i32 quick_read()
  233 = call i32 same(i32 %228, i32 %230)
  call void putint(i32 %233)
  call void putch(i32 10)
  br bb %if.exit225
if.exit225:
  y238.phi = phi [bb %else226, i32 %239, bb %then224, i32 %y238.phi264]
  x236.phi = phi [bb %else226, i32 %237, bb %then224, i32 %x236.phi262]
  y.phi = phi [bb %else226, i32 %y.phi260, bb %then224, i32 %230]
  x227.phi = phi [bb %else226, i32 %x227.phi258, bb %then224, i32 %228]
  m.load243 = load i32 from ptr @m
  244 = sub i32 %m.load243, i32 1
  store i32 %244 to ptr @m
  br bb %while.cond201
else226:
  237 = call i32 quick_read()
  239 = call i32 quick_read()
  call void add_edge(i32 %237, i32 %239)
  br bb %if.exit225
}

external float getfloat()

external void putfloat(float )

external void putch(i32 )

i32 pop_queue() {
entry114:
  h.load = load i32 from ptr @h
  116 = add i32 %h.load, i32 1
  store i32 %116 to ptr @h
  123 = mul i32 %116, i32 4
  124 = ptradd ptr @que, i32 %123
  124.load = load i32 from ptr %124
  ret i32 %124.load
}

external void _sysy_stoptime(i32 )

external void putarray(i32 , ptr )

external void _sysy_starttime(i32 )

external void putfarray(i32 , ptr )

i32 quick_read() {
entry:
  2 = call i32 getch()
  br bb %while.cond
while.cond:
  f.phi269 = phi [bb %entry, i32 0, bb %if.exit, i32 %f.phi]
  ch.phi266 = phi [bb %entry, i32 %2, bb %if.exit, i32 %23]
  9 = icmp slt i32 %ch.phi266, i32 48
  br i1 %9, bb %select.then, bb %select.else
while.body:
  20 = icmp eq i32 %ch.phi266, i32 45
  br i1 %20, bb %then, bb %if.exit
while.exit:
  br bb %while.cond24
select.then:
  br bb %select.exit
select.else:
  15 = icmp sgt i32 %ch.phi266, i32 57
  16 = icmp ne i1 %15, i1 0
  br bb %select.exit
select.exit:
  select.phi = phi [bb %select.else, i1 %16, bb %select.then, i1 1]
  18 = icmp ne i1 %select.phi, i1 0
  br i1 %18, bb %while.body, bb %while.exit
then:
  br bb %if.exit
if.exit:
  f.phi = phi [bb %while.body, i32 %f.phi269, bb %then, i32 1]
  23 = call i32 getch()
  br bb %while.cond
while.cond24:
  x.phi = phi [bb %while.exit, i32 0, bb %while.body25, i32 %41]
  ch.phi = phi [bb %while.exit, i32 %ch.phi266, bb %while.body25, i32 %42]
  28 = icmp sge i32 %ch.phi, i32 48
  br i1 %28, bb %select.then29, bb %select.else30
while.body25:
  38 = mul i32 %x.phi, i32 10
  40 = add i32 %38, i32 %ch.phi
  41 = sub i32 %40, i32 48
  42 = call i32 getch()
  br bb %while.cond24
while.exit26:
  44 = icmp ne i32 %f.phi269, i32 0
  br i1 %44, bb %then45, bb %else
select.then29:
  34 = icmp sle i32 %ch.phi, i32 57
  br bb %select.exit31
select.else30:
  br bb %select.exit31
select.exit31:
  select32.phi = phi [bb %select.else30, i1 0, bb %select.then29, i1 %34]
  36 = icmp ne i1 %select32.phi, i1 0
  br i1 %36, bb %while.body25, bb %while.exit26
then45:
  49 = sub i32 0, i32 %x.phi
  ret i32 %49
else:
  ret i32 %x.phi
}


