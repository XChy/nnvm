i32 KMP(ptr dst, ptr src) {
entry48:
  %next = stack 16384
  call void get_next(ptr %dst, ptr %next)
  br bb %while.cond53
while.cond53:
  138 = phi [bb %entry48, i32 0, bb %if.exit71, i32 %137]
  135 = phi [bb %entry48, i32 0, bb %if.exit71, i32 %134]
  57 = mul i32 %138, i32 4
  58 = ptradd ptr %src, i32 %57
  58.load = load i32 from ptr %58
  60 = icmp ne i32 %58.load, i32 0
  br i1 %60, bb %while.body54, bb %while.exit55
while.body54:
  62 = mul i32 %135, i32 4
  63 = ptradd ptr %dst, i32 %62
  63.load = load i32 from ptr %63
  66 = mul i32 %138, i32 4
  67 = ptradd ptr %src, i32 %66
  67.load = load i32 from ptr %67
  69 = icmp eq i32 %63.load, i32 %67.load
  br i1 %69, bb %then70, bb %else72
while.exit55:
  101 = sub i32 0, i32 1
  ret i32 %101
then70:
  74 = add i32 %135, i32 1
  76 = add i32 %138, i32 1
  78 = mul i32 %74, i32 4
  79 = ptradd ptr %dst, i32 %78
  79.load = load i32 from ptr %79
  81 = icmp ne i32 %79.load, i32 0
  82 =  i1 %81, i1 1
  83 = zext i1 %82 to i32
  84 = icmp ne i32 %83, i32 0
  br i1 %84, bb %then85, bb %if.exit86
if.exit71:
  137 = phi [bb %if.exit96, i32 %136, bb %if.exit86, i32 %76]
  134 = phi [bb %if.exit96, i32 %133, bb %if.exit86, i32 %74]
  br bb %while.cond53
else72:
  89 = mul i32 %135, i32 4
  90 = ptradd ptr %next, i32 %89
  90.load = load i32 from ptr %90
  93 = sub i32 0, i32 1
  94 = icmp eq i32 %90.load, i32 %93
  br i1 %94, bb %then95, bb %if.exit96
then85:
  ret i32 %76
if.exit86:
  br bb %if.exit71
then95:
  98 = add i32 %90.load, i32 1
  100 = add i32 %138, i32 1
  br bb %if.exit96
if.exit96:
  136 = phi [bb %else72, i32 %138, bb %then95, i32 %100]
  133 = phi [bb %else72, i32 %90.load, bb %then95, i32 %98]
  br bb %if.exit71
}

external i32 getint()

external i32 getch()

i32 read_str(ptr buf) {
entry102:
  br bb %while.cond104
while.cond104:
  139 = phi [bb %entry102, i32 0, bb %if.exit118, i32 %120]
  107 = icmp ne i32 1, i32 0
  br i1 %107, bb %while.body105, bb %while.exit106
while.body105:
  109 = mul i32 %139, i32 4
  110 = ptradd ptr %buf, i32 %109
  111 = call i32 getch()
  store i32 %111 to ptr %110
  113 = mul i32 %139, i32 4
  114 = ptradd ptr %buf, i32 %113
  114.load = load i32 from ptr %114
  116 = icmp eq i32 %114.load, i32 10
  br i1 %116, bb %then117, bb %if.exit118
while.exit106:
  122 = mul i32 %139, i32 4
  123 = ptradd ptr %buf, i32 %122
  store i32 0 to ptr %123
  ret i32 %139
then117:
  br bb %while.exit106
if.exit118:
  120 = add i32 %139, i32 1
  br bb %while.cond104
}

external void putint(i32 )

external i32 getfarray(ptr )

i32 main() {
entry125:
  %src = stack 16384
  %dst = stack 16384
  128 = call i32 read_str(ptr %dst)
  129 = call i32 read_str(ptr %src)
  130 = call i32 KMP(ptr %dst, ptr %src)
  call void putint(i32 %130)
  call void putch(i32 10)
  ret i32 0
}

external float getfloat()

external void putfloat(float )

external void putch(i32 )

external void _sysy_stoptime(i32 )

external void putarray(i32 , ptr )

external void _sysy_starttime(i32 )

external void putfarray(i32 , ptr )

external i32 getarray(ptr )

void get_next(ptr str, ptr next) {
entry:
  1 = mul i32 0, i32 4
  2 = ptradd ptr %next, i32 %1
  3 = sub i32 0, i32 1
  store i32 %3 to ptr %2
  6 = sub i32 0, i32 1
  br bb %while.cond
while.cond:
  145 = phi [bb %entry, i1 ub, bb %if.exit, i1 %144]
  143 = phi [bb %entry, i32 %6, bb %if.exit, i32 %142]
  141 = phi [bb %entry, i32 0, bb %if.exit, i32 %140]
  11 = mul i32 %141, i32 4
  12 = ptradd ptr %str, i32 %11
  12.load = load i32 from ptr %12
  14 = icmp ne i32 %12.load, i32 0
  br i1 %14, bb %while.body, bb %while.exit
while.body:
  16 = sub i32 0, i32 1
  17 = icmp eq i32 %143, i32 %16
  br i1 %17, bb %select.then, bb %select.else
while.exit:
  ret 
select.then:
  br bb %select.exit
select.else:
  23 = mul i32 %141, i32 4
  24 = ptradd ptr %str, i32 %23
  24.load = load i32 from ptr %24
  27 = mul i32 %143, i32 4
  28 = ptradd ptr %str, i32 %27
  28.load = load i32 from ptr %28
  30 = icmp eq i32 %24.load, i32 %28.load
  31 = icmp ne i1 %30, i1 0
  br bb %select.exit
select.exit:
  144 = phi [bb %select.else, i1 %31, bb %select.then, i1 1]
  br i1 %144, bb %then, bb %else
then:
  37 = add i32 %143, i32 1
  39 = add i32 %141, i32 1
  41 = mul i32 %39, i32 4
  42 = ptradd ptr %next, i32 %41
  store i32 %37 to ptr %42
  br bb %if.exit
if.exit:
  142 = phi [bb %else, i32 %46.load, bb %then, i32 %37]
  140 = phi [bb %else, i32 %141, bb %then, i32 %39]
  br bb %while.cond
else:
  45 = mul i32 %143, i32 4
  46 = ptradd ptr %next, i32 %45
  46.load = load i32 from ptr %46
  br bb %if.exit
}


