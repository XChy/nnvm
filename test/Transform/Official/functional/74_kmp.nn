i32 KMP(ptr dst, ptr src) {
entry48:
  %next = stack 16384
  store i32 -1 to ptr %next
  br bb %get_next.while.cond
while.cond53:
  j52.phi138 = phi [bb %get_next.while.exit, i32 0, bb %if.exit71, i32 %j52.phi137]
  i51.phi135 = phi [bb %get_next.while.exit, i32 0, bb %if.exit71, i32 %i51.phi134]
  146 = shl i32 %j52.phi138, i32 2
  58 = ptradd ptr %src, i32 %146
  58.load = load i32 from ptr %58
  60 = icmp ne i32 %58.load, i32 0
  br i1 %60, bb %while.body54, bb %while.exit55
while.body54:
  147 = shl i32 %i51.phi135, i32 2
  63 = ptradd ptr %dst, i32 %147
  63.load = load i32 from ptr %63
  69 = icmp eq i32 %63.load, i32 %58.load
  br i1 %69, bb %then70, bb %else72
while.exit55:
  ret i32 -1
then70:
  74 = add i32 %i51.phi135, i32 1
  76 = add i32 %j52.phi138, i32 1
  149 = shl i32 %74, i32 2
  79 = ptradd ptr %dst, i32 %149
  79.load = load i32 from ptr %79
  81 = icmp ne i32 %79.load, i32 0
  82 = xor i1 %81, i1 -1
  83 = zext i1 %82 to i32
  84 = icmp ne i32 %83, i32 0
  br i1 %84, bb %then85, bb %if.exit86
if.exit71:
  j52.phi137 = phi [bb %if.exit96, i32 %j52.phi, bb %if.exit86, i32 %76]
  i51.phi134 = phi [bb %if.exit96, i32 %i51.phi, bb %if.exit86, i32 %74]
  br bb %while.cond53
else72:
  90 = ptradd ptr %next, i32 %147
  90.load = load i32 from ptr %90
  94 = icmp eq i32 %90.load, i32 -1
  br i1 %94, bb %then95, bb %if.exit96
then85:
  ret i32 %76
if.exit86:
  br bb %if.exit71
then95:
  98 = add i32 %90.load, i32 1
  100 = add i32 %j52.phi138, i32 1
  br bb %if.exit96
if.exit96:
  j52.phi = phi [bb %else72, i32 %j52.phi138, bb %then95, i32 %100]
  i51.phi = phi [bb %else72, i32 %90.load, bb %then95, i32 %98]
  br bb %if.exit71
get_next.while.cond:
  i.phi143255 = phi [bb %entry48, i32 0, bb %get_next.if.exit, i32 %i.phi287]
  j.phi141256 = phi [bb %entry48, i32 -1, bb %get_next.if.exit, i32 %j.phi288]
  154257 = shl i32 %i.phi143255, i32 2
  12258 = ptradd ptr %dst, i32 %154257
  12.load259 = load i32 from ptr %12258
  14260 = icmp ne i32 %12.load259, i32 0
  br i1 %14260, bb %get_next.while.body, bb %get_next.while.exit
get_next.while.body:
  17263 = icmp eq i32 %j.phi141256, i32 -1
  br i1 %17263, bb %get_next.select.then, bb %get_next.select.else
get_next.while.exit:
  br bb %while.cond53
get_next.select.then:
  br bb %get_next.select.exit
get_next.select.else:
  156271 = shl i32 %j.phi141256, i32 2
  28272 = ptradd ptr %dst, i32 %156271
  28.load273 = load i32 from ptr %28272
  30274 = icmp eq i32 %12.load259, i32 %28.load273
  br bb %get_next.select.exit
get_next.select.exit:
  select.phi277 = phi [bb %get_next.select.else, i1 %30274, bb %get_next.select.then, i1 -1]
  br i1 %select.phi277, bb %get_next.then, bb %get_next.else
get_next.then:
  37280 = add i32 %j.phi141256, i32 1
  39281 = add i32 %i.phi143255, i32 1
  157282 = shl i32 %39281, i32 2
  42283 = ptradd ptr %next, i32 %157282
  store i32 %37280 to ptr %42283
  br bb %get_next.if.exit
get_next.if.exit:
  i.phi287 = phi [bb %get_next.else, i32 %i.phi143255, bb %get_next.then, i32 %39281]
  j.phi288 = phi [bb %get_next.else, i32 %46.load293, bb %get_next.then, i32 %37280]
  br bb %get_next.while.cond
get_next.else:
  158291 = shl i32 %j.phi141256, i32 2
  46292 = ptradd ptr %next, i32 %158291
  46.load293 = load i32 from ptr %46292
  br bb %get_next.if.exit
}

external i32 getint()

external i32 getch()

i32 read_str(ptr buf) {
entry102:
  br bb %while.cond104
while.cond104:
  i103.phi = phi [bb %entry102, i32 0, bb %if.exit118, i32 %120]
  151 = shl i32 %i103.phi, i32 2
  110 = ptradd ptr %buf, i32 %151
  111 = call i32 getch()
  store i32 %111 to ptr %110
  116 = icmp eq i32 %111, i32 10
  br i1 %116, bb %then117, bb %if.exit118
then117:
  store i32 0 to ptr %110
  ret i32 %i103.phi
if.exit118:
  120 = add i32 %i103.phi, i32 1
  br bb %while.cond104
}

external void putint(i32 )

external i32 getfarray(ptr )

i32 main() {
entry125:
  %next161 = stack 16384
  %src = stack 16384
  %dst = stack 16384
  br bb %read_str.while.cond104
entry125.split:
  130.ret = phi [bb %KMP.while.exit55, i32 -1, bb %KMP.then85, i32 %76183]
  call void putint(i32 %130.ret)
  call void putch(i32 10)
  ret i32 0
KMP.while.cond53:
  j52.phi138165 = phi [bb %get_next.while.exit310, i32 0, bb %KMP.if.exit71, i32 %j52.phi137193]
  i51.phi135166 = phi [bb %get_next.while.exit310, i32 0, bb %KMP.if.exit71, i32 %i51.phi134194]
  146167 = shl i32 %j52.phi138165, i32 2
  58168 = ptradd ptr %src, i32 %146167
  58.load169 = load i32 from ptr %58168
  60170 = icmp ne i32 %58.load169, i32 0
  br i1 %60170, bb %KMP.while.body54, bb %KMP.while.exit55
KMP.while.body54:
  147173 = shl i32 %i51.phi135166, i32 2
  63174 = ptradd ptr %dst, i32 %147173
  63.load175 = load i32 from ptr %63174
  69177 = icmp eq i32 %63.load175, i32 %58.load169
  br i1 %69177, bb %KMP.then70, bb %KMP.else72
KMP.while.exit55:
  br bb %entry125.split
KMP.then70:
  74182 = add i32 %i51.phi135166, i32 1
  76183 = add i32 %j52.phi138165, i32 1
  149184 = shl i32 %74182, i32 2
  79185 = ptradd ptr %dst, i32 %149184
  79.load186 = load i32 from ptr %79185
  81187 = icmp ne i32 %79.load186, i32 0
  82188 = xor i1 %81187, i1 -1
  83189 = zext i1 %82188 to i32
  84190 = icmp ne i32 %83189, i32 0
  br i1 %84190, bb %KMP.then85, bb %KMP.if.exit86
KMP.if.exit71:
  j52.phi137193 = phi [bb %KMP.if.exit96, i32 %j52.phi210, bb %KMP.if.exit86, i32 %76183]
  i51.phi134194 = phi [bb %KMP.if.exit96, i32 %i51.phi211, bb %KMP.if.exit86, i32 %74182]
  br bb %KMP.while.cond53
KMP.else72:
  90197 = ptradd ptr %next161, i32 %147173
  90.load198 = load i32 from ptr %90197
  94199 = icmp eq i32 %90.load198, i32 -1
  br i1 %94199, bb %KMP.then95, bb %KMP.if.exit96
KMP.then85:
  br bb %entry125.split
KMP.if.exit86:
  br bb %KMP.if.exit71
KMP.then95:
  98206 = add i32 %90.load198, i32 1
  100207 = add i32 %j52.phi138165, i32 1
  br bb %KMP.if.exit96
KMP.if.exit96:
  j52.phi210 = phi [bb %KMP.else72, i32 %j52.phi138165, bb %KMP.then95, i32 %100207]
  i51.phi211 = phi [bb %KMP.else72, i32 %90.load198, bb %KMP.then95, i32 %98206]
  br bb %KMP.if.exit71
read_str.while.cond104:
  i103.phi218 = phi [bb %entry125, i32 0, bb %read_str.if.exit118, i32 %120229]
  151219 = shl i32 %i103.phi218, i32 2
  110220 = ptradd ptr %dst, i32 %151219
  111221 = call i32 getch()
  store i32 %111221 to ptr %110220
  116223 = icmp eq i32 %111221, i32 10
  br i1 %116223, bb %read_str.then117, bb %read_str.if.exit118
read_str.then117:
  store i32 0 to ptr %110220
  br bb %read_str.while.cond104235
read_str.if.exit118:
  120229 = add i32 %i103.phi218, i32 1
  br bb %read_str.while.cond104
read_str.while.cond104235:
  i103.phi236 = phi [bb %read_str.then117, i32 0, bb %read_str.if.exit118246, i32 %120247]
  151237 = shl i32 %i103.phi236, i32 2
  110238 = ptradd ptr %src, i32 %151237
  111239 = call i32 getch()
  store i32 %111239 to ptr %110238
  116241 = icmp eq i32 %111239, i32 10
  br i1 %116241, bb %read_str.then117243, bb %read_str.if.exit118246
read_str.then117243:
  store i32 0 to ptr %110238
  store i32 -1 to ptr %next161
  br bb %get_next.while.cond299
read_str.if.exit118246:
  120247 = add i32 %i103.phi236, i32 1
  br bb %read_str.while.cond104235
get_next.while.cond299:
  i.phi143300 = phi [bb %read_str.then117243, i32 0, bb %get_next.if.exit331, i32 %i.phi332]
  j.phi141301 = phi [bb %read_str.then117243, i32 -1, bb %get_next.if.exit331, i32 %j.phi333]
  154302 = shl i32 %i.phi143300, i32 2
  12303 = ptradd ptr %dst, i32 %154302
  12.load304 = load i32 from ptr %12303
  14305 = icmp ne i32 %12.load304, i32 0
  br i1 %14305, bb %get_next.while.body307, bb %get_next.while.exit310
get_next.while.body307:
  17308 = icmp eq i32 %j.phi141301, i32 -1
  br i1 %17308, bb %get_next.select.then312, bb %get_next.select.else314
get_next.while.exit310:
  br bb %KMP.while.cond53
get_next.select.then312:
  br bb %get_next.select.exit321
get_next.select.else314:
  156316 = shl i32 %j.phi141301, i32 2
  28317 = ptradd ptr %dst, i32 %156316
  28.load318 = load i32 from ptr %28317
  30319 = icmp eq i32 %12.load304, i32 %28.load318
  br bb %get_next.select.exit321
get_next.select.exit321:
  select.phi322 = phi [bb %get_next.select.else314, i1 %30319, bb %get_next.select.then312, i1 -1]
  br i1 %select.phi322, bb %get_next.then324, bb %get_next.else335
get_next.then324:
  37325 = add i32 %j.phi141301, i32 1
  39326 = add i32 %i.phi143300, i32 1
  157327 = shl i32 %39326, i32 2
  42328 = ptradd ptr %next161, i32 %157327
  store i32 %37325 to ptr %42328
  br bb %get_next.if.exit331
get_next.if.exit331:
  i.phi332 = phi [bb %get_next.else335, i32 %i.phi143300, bb %get_next.then324, i32 %39326]
  j.phi333 = phi [bb %get_next.else335, i32 %46.load338, bb %get_next.then324, i32 %37325]
  br bb %get_next.while.cond299
get_next.else335:
  158336 = shl i32 %j.phi141301, i32 2
  46337 = ptradd ptr %next161, i32 %158336
  46.load338 = load i32 from ptr %46337
  br bb %get_next.if.exit331
}

external float getfloat()

external void putfloat(float )

external void putch(i32 )

external void _sysy_stoptime(i32 )

external void putarray(i32 , ptr )

external void _sysy_starttime(i32 )

external void putfarray(i32 , ptr )

external i32 getarray(ptr )

void get_next(ptr str, ptr next) {
entry:
  store i32 -1 to ptr %next
  br bb %while.cond
while.cond:
  i.phi143 = phi [bb %entry, i32 0, bb %if.exit, i32 %i.phi]
  j.phi141 = phi [bb %entry, i32 -1, bb %if.exit, i32 %j.phi]
  154 = shl i32 %i.phi143, i32 2
  12 = ptradd ptr %str, i32 %154
  12.load = load i32 from ptr %12
  14 = icmp ne i32 %12.load, i32 0
  br i1 %14, bb %while.body, bb %while.exit
while.body:
  17 = icmp eq i32 %j.phi141, i32 -1
  br i1 %17, bb %select.then, bb %select.else
while.exit:
  ret 
select.then:
  br bb %select.exit
select.else:
  156 = shl i32 %j.phi141, i32 2
  28 = ptradd ptr %str, i32 %156
  28.load = load i32 from ptr %28
  30 = icmp eq i32 %12.load, i32 %28.load
  br bb %select.exit
select.exit:
  select.phi = phi [bb %select.else, i1 %30, bb %select.then, i1 -1]
  br i1 %select.phi, bb %then, bb %else
then:
  37 = add i32 %j.phi141, i32 1
  39 = add i32 %i.phi143, i32 1
  157 = shl i32 %39, i32 2
  42 = ptradd ptr %next, i32 %157
  store i32 %37 to ptr %42
  br bb %if.exit
if.exit:
  i.phi = phi [bb %else, i32 %i.phi143, bb %then, i32 %39]
  j.phi = phi [bb %else, i32 %46.load, bb %then, i32 %37]
  br bb %while.cond
else:
  158 = shl i32 %j.phi141, i32 2
  46 = ptradd ptr %next, i32 %158
  46.load = load i32 from ptr %46
  br bb %if.exit
}


