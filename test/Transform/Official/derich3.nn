global ptr my_y2 init with 138240 x float zeros
global ptr imgOut init with 138240 x float zeros
global ptr my_y1 init with 138240 x float zeros
global ptr imgIn init with 138240 x float zeros
global ptr alpha init with float 0.250000
global ptr h init with i32 270
global ptr w init with i32 512
void kernel_deriche(i32 w, i32 h, float alpha, ptr imgIn, ptr imgOut, ptr y1, ptr y2) {
entry59:  pred()
  89 = fneg float %alpha
  3542 = si2f i32 256 to float
  4543 = fdiv float %89, float %3542
  5544 = fadd float 1.000000, float %4543
  8545 = fmul float %5544, float %5544
  11546 = fmul float %8545, float %8545
  14547 = fmul float %11546, float %11546
  17548 = fmul float %14547, float %14547
  20549 = fmul float %17548, float %17548
  23550 = fmul float %20549, float %20549
  26551 = fmul float %23550, float %23550
  29552 = fmul float %26551, float %26551
  91 = fsub float 1.000000, float %29552
  96 = fmul float %91, float %91
  98 = fmul float 2.000000, float %alpha
  102 = fmul float %98, float %29552
  103 = fadd float 1.000000, float %102
  4558 = fdiv float %98, float %3542
  5559 = fadd float 1.000000, float %4558
  8560 = fmul float %5559, float %5559
  11561 = fmul float %8560, float %8560
  14562 = fmul float %11561, float %11561
  17563 = fmul float %14562, float %14562
  20564 = fmul float %17563, float %17563
  23565 = fmul float %20564, float %20564
  26566 = fmul float %23565, float %23565
  29567 = fmul float %26566, float %26566
  107 = fsub float %103, float %29567
  108 = fdiv float %96, float %107
  115 = fmul float %108, float %29552
  117 = fsub float %alpha, float 1.000000
  118 = fmul float %115, float %117
  126 = fadd float %alpha, float 1.000000
  127 = fmul float %115, float %126
  130 = fneg float %108
  131 = fneg float 2.000000
  133 = fmul float %131, float %alpha
  4573 = fdiv float %133, float %3542
  5574 = fadd float 1.000000, float %4573
  8575 = fmul float %5574, float %5574
  11576 = fmul float %8575, float %8575
  14577 = fmul float %11576, float %11576
  17578 = fmul float %14577, float %14577
  20579 = fmul float %17578, float %17578
  23580 = fmul float %20579, float %20579
  26581 = fmul float %23580, float %23580
  29582 = fmul float %26581, float %26581
  135 = fmul float %130, float %29582
  139 = f2si float %89 to i32
  140 = call float newPow(float 2.000000, i32 %139)
  145 = fneg float %29582
  146 = si2f i32 1 to float
  153621 = icmp slt i32 0, i32 %w
  br i1 %153621, bb %while.body_preheader, bb %while.exit
while.cond:  pred(while.exit157)
  i.phi481 = phi [bb %while.exit157, i32 %207]
  153 = icmp slt i32 %i.phi481, i32 %w
  br i1 %153, bb %while.body, bb %while.exit
while.body_preheader:  pred(entry59)
  i.phi481622_ph_val = phi [bb %entry59, i32 0]
  br bb %while.body
while.body:  pred(while.cond, while.body_preheader)
  i.phi481622 = phi [bb %while.cond, i32 %i.phi481, bb %while.body_preheader, i32 %i.phi481622_ph_val]
  160585 = icmp slt i32 0, i32 %h
  br i1 %160585, bb %while.body156_preheader, bb %while.exit157
while.exit:  pred(while.cond, entry59)
  213619 = icmp slt i32 0, i32 %w
  br i1 %213619, bb %while.body209_preheader, bb %while.exit210
while.cond155:  pred(while.body156)
  ym2.phi502 = phi [bb %while.body156, float %ym1.phi498587]
  ym1.phi498 = phi [bb %while.body156, float %188]
  xm1.phi = phi [bb %while.body156, float %194.load]
  j.phi490 = phi [bb %while.body156, i32 %205]
  160 = icmp slt i32 %j.phi490, i32 %h
  br i1 %160, bb %while.body156, bb %while.exit157
while.body156_preheader:  pred(while.body)
  ym2.phi502586_ph_val = phi [bb %while.body, float 0.000000]
  ym1.phi498587_ph_val = phi [bb %while.body, float 0.000000]
  xm1.phi588_ph_val = phi [bb %while.body, float 0.000000]
  j.phi490589_ph_val = phi [bb %while.body, i32 0]
  br bb %while.body156
while.body156:  pred(while.cond155, while.body156_preheader)
  j.phi490589 = phi [bb %while.cond155, i32 %j.phi490, bb %while.body156_preheader, i32 %j.phi490589_ph_val]
  xm1.phi588 = phi [bb %while.cond155, float %xm1.phi, bb %while.body156_preheader, float %xm1.phi588_ph_val]
  ym1.phi498587 = phi [bb %while.cond155, float %ym1.phi498, bb %while.body156_preheader, float %ym1.phi498587_ph_val]
  ym2.phi502586 = phi [bb %while.cond155, float %ym2.phi502, bb %while.body156_preheader, float %ym2.phi502586_ph_val]
  163 = mul i32 %i.phi481622, i32 1080
  164 = ptradd ptr %y1, i32 %163
  520 = shl i32 %j.phi490589, i32 2
  167 = ptradd ptr %164, i32 %520
  171 = ptradd ptr %imgIn, i32 %163
  174 = ptradd ptr %171, i32 %520
  174.load = load float from ptr %174
  176 = fmul float %108, float %174.load
  179 = fmul float %118, float %xm1.phi588
  180 = fadd float %176, float %179
  183 = fmul float %140, float %ym1.phi498587
  184 = fadd float %180, float %183
  187 = fmul float %145, float %ym2.phi502586
  188 = fadd float %184, float %187
  store float %188 to ptr %167
  194.load = load float from ptr %174
  205 = add i32 %j.phi490589, i32 1
  br bb %while.cond155
while.exit157:  pred(while.cond155, while.body)
  207 = add i32 %i.phi481622, i32 1
  br bb %while.cond
while.cond208:  pred(while.exit219)
  i.phi480 = phi [bb %while.exit219, i32 %263]
  213 = icmp slt i32 %i.phi480, i32 %w
  br i1 %213, bb %while.body209, bb %while.exit210
while.body209_preheader:  pred(while.exit)
  i.phi480620_ph_val = phi [bb %while.exit, i32 0]
  br bb %while.body209
while.body209:  pred(while.cond208, while.body209_preheader)
  i.phi480620 = phi [bb %while.cond208, i32 %i.phi480, bb %while.body209_preheader, i32 %i.phi480620_ph_val]
  216 = sub i32 %h, i32 1
  221590 = icmp sge i32 %216, i32 0
  br i1 %221590, bb %while.body218_preheader, bb %while.exit219
while.exit210:  pred(while.cond208, while.exit)
  269617 = icmp slt i32 0, i32 %w
  br i1 %269617, bb %while.body265_preheader, bb %while.exit266
while.cond217:  pred(while.body218)
  yp1.phi514 = phi [bb %while.body218, float %243]
  yp2.phi510 = phi [bb %while.body218, float %yp1.phi514591]
  xp1.phi = phi [bb %while.body218, float %250.load]
  xp2.phi = phi [bb %while.body218, float %xp1.phi593]
  j.phi488 = phi [bb %while.body218, i32 %261]
  221 = icmp sge i32 %j.phi488, i32 0
  br i1 %221, bb %while.body218, bb %while.exit219
while.body218_preheader:  pred(while.body209)
  yp1.phi514591_ph_val = phi [bb %while.body209, float 0.000000]
  yp2.phi510592_ph_val = phi [bb %while.body209, float 0.000000]
  xp1.phi593_ph_val = phi [bb %while.body209, float 0.000000]
  xp2.phi594_ph_val = phi [bb %while.body209, float 0.000000]
  j.phi488595_ph_val = phi [bb %while.body209, i32 %216]
  br bb %while.body218
while.body218:  pred(while.cond217, while.body218_preheader)
  j.phi488595 = phi [bb %while.cond217, i32 %j.phi488, bb %while.body218_preheader, i32 %j.phi488595_ph_val]
  xp2.phi594 = phi [bb %while.cond217, float %xp2.phi, bb %while.body218_preheader, float %xp2.phi594_ph_val]
  xp1.phi593 = phi [bb %while.cond217, float %xp1.phi, bb %while.body218_preheader, float %xp1.phi593_ph_val]
  yp2.phi510592 = phi [bb %while.cond217, float %yp2.phi510, bb %while.body218_preheader, float %yp2.phi510592_ph_val]
  yp1.phi514591 = phi [bb %while.cond217, float %yp1.phi514, bb %while.body218_preheader, float %yp1.phi514591_ph_val]
  224 = mul i32 %i.phi480620, i32 1080
  225 = ptradd ptr %y2, i32 %224
  524 = shl i32 %j.phi488595, i32 2
  228 = ptradd ptr %225, i32 %524
  231 = fmul float %127, float %xp1.phi593
  234 = fmul float %135, float %xp2.phi594
  235 = fadd float %231, float %234
  238 = fmul float %140, float %yp1.phi514591
  239 = fadd float %235, float %238
  242 = fmul float %145, float %yp2.phi510592
  243 = fadd float %239, float %242
  store float %243 to ptr %228
  247 = ptradd ptr %imgIn, i32 %224
  250 = ptradd ptr %247, i32 %524
  250.load = load float from ptr %250
  261 = sub i32 %j.phi488595, i32 1
  br bb %while.cond217
while.exit219:  pred(while.cond217, while.body209)
  263 = add i32 %i.phi480620, i32 1
  br bb %while.cond208
while.cond264:  pred(while.exit273)
  i.phi479 = phi [bb %while.exit273, i32 %304]
  269 = icmp slt i32 %i.phi479, i32 %w
  br i1 %269, bb %while.body265, bb %while.exit266
while.body265_preheader:  pred(while.exit210)
  i.phi479618_ph_val = phi [bb %while.exit210, i32 0]
  br bb %while.body265
while.body265:  pred(while.cond264, while.body265_preheader)
  i.phi479618 = phi [bb %while.cond264, i32 %i.phi479, bb %while.body265_preheader, i32 %i.phi479618_ph_val]
  276596 = icmp slt i32 0, i32 %h
  br i1 %276596, bb %while.body272_preheader, bb %while.exit273
while.exit266:  pred(while.cond264, while.exit210)
  310615 = icmp slt i32 0, i32 %h
  br i1 %310615, bb %while.body306_preheader, bb %while.exit307
while.cond271:  pred(while.body272)
  j.phi486 = phi [bb %while.body272, i32 %302]
  276 = icmp slt i32 %j.phi486, i32 %h
  br i1 %276, bb %while.body272, bb %while.exit273
while.body272_preheader:  pred(while.body265)
  j.phi486597_ph_val = phi [bb %while.body265, i32 0]
  br bb %while.body272
while.body272:  pred(while.cond271, while.body272_preheader)
  j.phi486597 = phi [bb %while.cond271, i32 %j.phi486, bb %while.body272_preheader, i32 %j.phi486597_ph_val]
  279 = mul i32 %i.phi479618, i32 1080
  280 = ptradd ptr %imgOut, i32 %279
  527 = shl i32 %j.phi486597, i32 2
  283 = ptradd ptr %280, i32 %527
  287 = ptradd ptr %y1, i32 %279
  290 = ptradd ptr %287, i32 %527
  290.load = load float from ptr %290
  294 = ptradd ptr %y2, i32 %279
  297 = ptradd ptr %294, i32 %527
  297.load = load float from ptr %297
  299 = fadd float %290.load, float %297.load
  300 = fmul float %146, float %299
  store float %300 to ptr %283
  302 = add i32 %j.phi486597, i32 1
  br bb %while.cond271
while.exit273:  pred(while.cond271, while.body265)
  304 = add i32 %i.phi479618, i32 1
  br bb %while.cond264
while.cond305:  pred(while.exit314)
  j.phi485 = phi [bb %while.exit314, i32 %364]
  310 = icmp slt i32 %j.phi485, i32 %h
  br i1 %310, bb %while.body306, bb %while.exit307
while.body306_preheader:  pred(while.exit266)
  j.phi485616_ph_val = phi [bb %while.exit266, i32 0]
  br bb %while.body306
while.body306:  pred(while.cond305, while.body306_preheader)
  j.phi485616 = phi [bb %while.cond305, i32 %j.phi485, bb %while.body306_preheader, i32 %j.phi485616_ph_val]
  317598 = icmp slt i32 0, i32 %w
  br i1 %317598, bb %while.body313_preheader, bb %while.exit314
while.exit307:  pred(while.cond305, while.exit266)
  370613 = icmp slt i32 0, i32 %h
  br i1 %370613, bb %while.body366_preheader, bb %while.exit367
while.cond312:  pred(while.body313)
  ym2.phi = phi [bb %while.body313, float %ym1.phi600]
  ym1.phi = phi [bb %while.body313, float %345]
  tm1.phi = phi [bb %while.body313, float %351.load]
  i.phi477 = phi [bb %while.body313, i32 %362]
  317 = icmp slt i32 %i.phi477, i32 %w
  br i1 %317, bb %while.body313, bb %while.exit314
while.body313_preheader:  pred(while.body306)
  ym2.phi599_ph_val = phi [bb %while.body306, float 0.000000]
  ym1.phi600_ph_val = phi [bb %while.body306, float 0.000000]
  tm1.phi601_ph_val = phi [bb %while.body306, float 0.000000]
  i.phi477602_ph_val = phi [bb %while.body306, i32 0]
  br bb %while.body313
while.body313:  pred(while.cond312, while.body313_preheader)
  i.phi477602 = phi [bb %while.cond312, i32 %i.phi477, bb %while.body313_preheader, i32 %i.phi477602_ph_val]
  tm1.phi601 = phi [bb %while.cond312, float %tm1.phi, bb %while.body313_preheader, float %tm1.phi601_ph_val]
  ym1.phi600 = phi [bb %while.cond312, float %ym1.phi, bb %while.body313_preheader, float %ym1.phi600_ph_val]
  ym2.phi599 = phi [bb %while.cond312, float %ym2.phi, bb %while.body313_preheader, float %ym2.phi599_ph_val]
  320 = mul i32 %i.phi477602, i32 1080
  321 = ptradd ptr %y1, i32 %320
  530 = shl i32 %j.phi485616, i32 2
  324 = ptradd ptr %321, i32 %530
  328 = ptradd ptr %imgOut, i32 %320
  331 = ptradd ptr %328, i32 %530
  331.load = load float from ptr %331
  333 = fmul float %108, float %331.load
  336 = fmul float %118, float %tm1.phi601
  337 = fadd float %333, float %336
  340 = fmul float %140, float %ym1.phi600
  341 = fadd float %337, float %340
  344 = fmul float %145, float %ym2.phi599
  345 = fadd float %341, float %344
  store float %345 to ptr %324
  351.load = load float from ptr %331
  362 = add i32 %i.phi477602, i32 1
  br bb %while.cond312
while.exit314:  pred(while.cond312, while.body306)
  364 = add i32 %j.phi485616, i32 1
  br bb %while.cond305
while.cond365:  pred(while.exit376)
  j.phi484 = phi [bb %while.exit376, i32 %420]
  370 = icmp slt i32 %j.phi484, i32 %h
  br i1 %370, bb %while.body366, bb %while.exit367
while.body366_preheader:  pred(while.exit307)
  j.phi484614_ph_val = phi [bb %while.exit307, i32 0]
  br bb %while.body366
while.body366:  pred(while.cond365, while.body366_preheader)
  j.phi484614 = phi [bb %while.cond365, i32 %j.phi484, bb %while.body366_preheader, i32 %j.phi484614_ph_val]
  373 = sub i32 %w, i32 1
  378603 = icmp sge i32 %373, i32 0
  br i1 %378603, bb %while.body375_preheader, bb %while.exit376
while.exit367:  pred(while.cond365, while.exit307)
  426611 = icmp slt i32 0, i32 %w
  br i1 %426611, bb %while.body422_preheader, bb %while.exit423
while.cond374:  pred(while.body375)
  tp1.phi = phi [bb %while.body375, float %407.load]
  tp2.phi = phi [bb %while.body375, float %tp1.phi604]
  yp1.phi = phi [bb %while.body375, float %400]
  yp2.phi = phi [bb %while.body375, float %yp1.phi606]
  i.phi475 = phi [bb %while.body375, i32 %418]
  378 = icmp sge i32 %i.phi475, i32 0
  br i1 %378, bb %while.body375, bb %while.exit376
while.body375_preheader:  pred(while.body366)
  tp1.phi604_ph_val = phi [bb %while.body366, float 0.000000]
  tp2.phi605_ph_val = phi [bb %while.body366, float 0.000000]
  yp1.phi606_ph_val = phi [bb %while.body366, float 0.000000]
  yp2.phi607_ph_val = phi [bb %while.body366, float 0.000000]
  i.phi475608_ph_val = phi [bb %while.body366, i32 %373]
  br bb %while.body375
while.body375:  pred(while.cond374, while.body375_preheader)
  i.phi475608 = phi [bb %while.cond374, i32 %i.phi475, bb %while.body375_preheader, i32 %i.phi475608_ph_val]
  yp2.phi607 = phi [bb %while.cond374, float %yp2.phi, bb %while.body375_preheader, float %yp2.phi607_ph_val]
  yp1.phi606 = phi [bb %while.cond374, float %yp1.phi, bb %while.body375_preheader, float %yp1.phi606_ph_val]
  tp2.phi605 = phi [bb %while.cond374, float %tp2.phi, bb %while.body375_preheader, float %tp2.phi605_ph_val]
  tp1.phi604 = phi [bb %while.cond374, float %tp1.phi, bb %while.body375_preheader, float %tp1.phi604_ph_val]
  381 = mul i32 %i.phi475608, i32 1080
  382 = ptradd ptr %y2, i32 %381
  534 = shl i32 %j.phi484614, i32 2
  385 = ptradd ptr %382, i32 %534
  388 = fmul float %127, float %tp1.phi604
  391 = fmul float %135, float %tp2.phi605
  392 = fadd float %388, float %391
  395 = fmul float %140, float %yp1.phi606
  396 = fadd float %392, float %395
  399 = fmul float %145, float %yp2.phi607
  400 = fadd float %396, float %399
  store float %400 to ptr %385
  404 = ptradd ptr %imgOut, i32 %381
  407 = ptradd ptr %404, i32 %534
  407.load = load float from ptr %407
  418 = sub i32 %i.phi475608, i32 1
  br bb %while.cond374
while.exit376:  pred(while.cond374, while.body366)
  420 = add i32 %j.phi484614, i32 1
  br bb %while.cond365
while.cond421:  pred(while.exit430)
  i.phi = phi [bb %while.exit430, i32 %461]
  426 = icmp slt i32 %i.phi, i32 %w
  br i1 %426, bb %while.body422, bb %while.exit423
while.body422_preheader:  pred(while.exit367)
  i.phi612_ph_val = phi [bb %while.exit367, i32 0]
  br bb %while.body422
while.body422:  pred(while.cond421, while.body422_preheader)
  i.phi612 = phi [bb %while.cond421, i32 %i.phi, bb %while.body422_preheader, i32 %i.phi612_ph_val]
  433609 = icmp slt i32 0, i32 %h
  br i1 %433609, bb %while.body429_preheader, bb %while.exit430
while.exit423:  pred(while.cond421, while.exit367)
  ret 
while.cond428:  pred(while.body429)
  j.phi = phi [bb %while.body429, i32 %459]
  433 = icmp slt i32 %j.phi, i32 %h
  br i1 %433, bb %while.body429, bb %while.exit430
while.body429_preheader:  pred(while.body422)
  j.phi610_ph_val = phi [bb %while.body422, i32 0]
  br bb %while.body429
while.body429:  pred(while.cond428, while.body429_preheader)
  j.phi610 = phi [bb %while.cond428, i32 %j.phi, bb %while.body429_preheader, i32 %j.phi610_ph_val]
  436 = mul i32 %i.phi612, i32 1080
  437 = ptradd ptr %imgOut, i32 %436
  537 = shl i32 %j.phi610, i32 2
  440 = ptradd ptr %437, i32 %537
  444 = ptradd ptr %y1, i32 %436
  447 = ptradd ptr %444, i32 %537
  447.load = load float from ptr %447
  451 = ptradd ptr %y2, i32 %436
  454 = ptradd ptr %451, i32 %537
  454.load = load float from ptr %454
  456 = fadd float %447.load, float %454.load
  457 = fmul float %146, float %456
  store float %457 to ptr %440
  459 = add i32 %j.phi610, i32 1
  br bb %while.cond428
while.exit430:  pred(while.cond428, while.body422)
  461 = add i32 %i.phi612, i32 1
  br bb %while.cond421
}

pure float newPow(float num, i32 n) {
entry31:  pred()
  35 = icmp slt i32 %n, i32 0
  br i1 %35, bb %then, bb %else
then:  pred(entry31)
  41 = sub i32 0, i32 %n
  42 = call float newPow(float %num, i32 %41)
  43 = fdiv float 1.000000, float %42
  ret float %43
else:  pred(entry31)
  45 = icmp eq i32 %n, i32 0
  br i1 %45, bb %then46, bb %else48
then46:  pred(else)
  ret float 1.000000
else48:  pred(else)
  50 = icmp sgt i32 %n, i32 0
  br i1 %50, bb %then51, bb %if.exit52
then51:  pred(else48)
  56 = sub i32 %n, i32 1
  57 = call float newPow(float %num, i32 %56)
  58 = fmul float %num, float %57
  ret float %58
if.exit52:  pred(else48)
  unreachable
}

external i32 getint()

external i32 getch()

external void putint(i32 )

external i32 getarray(ptr )

external i32 getfarray(ptr )

i32 main() {
entry462:  pred()
  463 = call i32 getfarray(ptr @imgIn)
  call void _sysy_starttime(i32 156)
  w.load = load i32 from ptr @w
  h.load = load i32 from ptr @h
  alpha.load = load float from ptr @alpha
  call void kernel_deriche(i32 %w.load, i32 %h.load, float %alpha.load, ptr @imgIn, ptr @imgOut, ptr @my_y1, ptr @my_y2)
  call void _sysy_stoptime(i32 158)
  w.load470 = load i32 from ptr @w
  h.load471 = load i32 from ptr @h
  472 = mul i32 %w.load470, i32 %h.load471
  call void putfarray(i32 %472, ptr @imgOut)
  ret i32 0
}

external float getfloat()

external void putfloat(float )

external void putch(i32 )

external void _sysy_stoptime(i32 )

external void putarray(i32 , ptr )

external void putfarray(i32 , ptr )

external void _sysy_starttime(i32 )

pure float newExp(float x) {
entry:  pred()
  3 = si2f i32 256 to float
  4 = fdiv float %x, float %3
  5 = fadd float 1.000000, float %4
  8 = fmul float %5, float %5
  11 = fmul float %8, float %8
  14 = fmul float %11, float %11
  17 = fmul float %14, float %14
  20 = fmul float %17, float %17
  23 = fmul float %20, float %20
  26 = fmul float %23, float %23
  29 = fmul float %26, float %26
  ret float %29
}


